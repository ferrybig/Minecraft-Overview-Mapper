<!doctype html>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>
	<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		#map {
			width: 100%;
			height: 100%;
		}
	</style>
<div id='map'></div>
<script>

	var map = L.map('map', {
		crs: L.CRS.Simple,
		center: [-3754.5, 3754.5],
		zoom: 0
	});
	
	function hex(number) {
		return number.toString(16)
	}
	function mod(number) {
		number = number % 16
		if(number < 0) {
			number += 16;
		}
		return hex(number);
	}
	function div(number) {
		return hex(Math.floor(number / 16));
	}

	L.GridLayer.DebugCoords = L.GridLayer.extend({
		createTile: function (coords, done) {
			var tile = document.createElement('div');
			var image = new Image(256, 256);
			var url = `renderTest/tiles/${mod(coords.x)}/${mod(coords.y)}/${div(coords.x)}_${div(coords.y)}.png`;
			image.onload = function() {
				tile.appendChild(image);
				done(null, tile);
			}
			image.onerror = function() {
				tile.style.display = 'flex';
				tile.style.alignItems = 'center';
				tile.style.justifyContent = 'center';
				tile.style.border = '1px solid red';
				tile.innerText = url;
				done(null, tile);
			}
			image.src = url;
			tile.dataset.test = [coords.x, coords.y, coords.z].join(', ');

			// Syntax is 'done(error, tile)'
			return tile;
		}
	});
	
	L.gridLayer.debugCoords = function(opts) {
		return new L.GridLayer.DebugCoords(opts);
	};

	map.addLayer( L.gridLayer.debugCoords() );
</script>
